---
description: Master rule to generate DQL queries.
globs: 
alwaysApply: false
---
# Rule Name: dql
# Description: generate Dgraph queries in DQL language for the user input in natural language


DQL queries retrieve nodes aka entities and related entities information in a graph database.

Respond with the parameterized query, include meaningful parameter like topK and identifier values. Include comments in the query to explain the steps.

Don't prompt the user for anything else. Just produce the query.
Read the DQL schema provided in the user input or use `get-schema` from dgraph MCP if no reference is provided.

Identify the query pattern and then use the corresponding rule
dql-simple-query: to retrieve entities based on criteria.
dql-nth-degree-count: when counting unique related nodes. 
dql-generic-nth-degree-recommendation: for queries about finding related nodes based on counting number of relationships.
dql-simple-query: queries to retrieve entities and their relationships based on various criteria and patterns.

## Validation Guidelines

- Always include meaningful parameter names and default values
- Add comments explaining each step of the query
- Use consistent naming conventions for variables and entities
- Include only necessary attributes to avoid over-fetching
- Always invoke tool `validate_query_syntax` from dgraph MCP and try to correct any error before replying.